DROP TABLE IF EXISTS language CASCADE;  

CREATE TABLE language
(
	id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	name varchar(128) NOT NULL
);

INSERT INTO language(name) VALUES
('RU'),
('EN');

DROP TABLE IF EXISTS currency CASCADE;  

CREATE TABLE currency
(
	id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	name varchar(128) NOT NULL
);

INSERT INTO currency(name) VALUES
('RUB'),
('EURO'),
('USD');

DROP TABLE IF EXISTS product CASCADE;  

CREATE TABLE product
(
	id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP	
);

INSERT INTO product(id) VALUES
(1),
(2),
(3),
(4),
(5);

DROP TABLE IF EXISTS description CASCADE;  

CREATE TABLE description
(
	id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	name varchar(128) NOT NULL,
	description varchar(256) NOT NULL,
	product_id int NOT NULL,
	language_id int NOT NULL,
	FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO description(name, description, product_id, language_id) VALUES
('First product', 'first description', 1, 1),
('Second product', 'second description', 2, 2),
('Third product', 'third description', 3, 1),
('Fourth product', 'fourth description', 4, 1),
('Fifth product', 'fifth description', 5, 2);

DROP TABLE IF EXISTS cost CASCADE;  

CREATE TABLE cost
(
	id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	value numeric(10,2) NOT NULL DEFAULT '1' CHECK(value > 0),
	product_id int NOT NULL,
	currency_id int NOT NULL,
	FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (currency_id) REFERENCES currency(id) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO cost(value, product_id, currency_id) VALUES
('1.1', 1, 1),
('1.2', 1, 3),
('2.0', 2, 2),
('3.1', 3, 1),
('4.1', 4, 1),
('5.1', 5, 2);

